Міністерство освіти і науки України
Харківський національний університет радіоелектроніки
Кафедра програмної інженерії

ЗВІТ
з лабораторної роботи № 2
з дисципліни «Скриптові мови програмування»

Виконав
ст. гр. ПЗПІ-23-4
Борщ Анатолій Сергійович
Перевірив ст. вик. Сокорчук Ігор Петрович

Харків 2025

1 ІСТОРІЯ ЗМІН
№	Дата		Версія звіту	Опис виправлень та змін 1	10.05.2025	1.0		Створено розділ «Історія змін»2	10.05.2025	1.0		Створено розділ «Завдання»3	10.05.2025	1.0		Створено розділ «Висновки»4	10.05.2025	1.0		Створено розділ «Додаток В»

2 ЗАВДАННЯ
2.1 Мета завдання
Потрібно створити консольний застосунок «Продовольчий магазин "Весна"».
2.2 Завдання
Програма після запуску повинна вивести на термінал перелік можливих дій:

################################
# ПРОДОВОЛЬЧИЙ МАГАЗИН "ВЕСНА" #
################################
1 Вибрати товари
2 Отримати підсумковий рахунок
3 Налаштувати свій профіль
0 Вийти з програми
Введіть команду: _
Далі програма очікує введення значення з клавіатури. Якщо користувач вводить число, якого немає в списку можливих команд, необхідно вивести повідомлення про помилку і запропонувати користувачу ввести інше число:
Введіть команду: 4
ПОМИЛКА! Введіть правильну команду
1 Вибрати товари
2 Отримати підсумковий рахунок
3 Налаштувати свій профіль
0 Вийти з програми
Введіть команду: _
Щоб розпочати купувати товари, необхідно ввести число «1», після чого користувач повинен потрапити в режим закупівлі товарів.
На екрані має з’явитися перелік продуктів, де кожен рядок складається з номера, назви товару і його вартості, наприклад:
Введіть команду: 1
№  НАЗВА                 ЦІНА
1  Молоко пастеризоване  12
2  Хліб чорний           9
3  Сир білий             21
4  Сметана 20%           25
5  Кефір 1%              19
6  Вода газована         18
7  Печиво "Весна"        14
   -----------
0  ПОВЕРНУТИСЯ
Виберіть товар: _
Щоб купити товар, необхідно ввести його номер.
Після успішної перевірки на існування номера товару в списку, програма має попросити ввести кількість товару:

Виберіть товар: 2
Вибрано: Хліб чорний
Введіть кількість, штук: 1
У КОШИКУ:
НАЗВА        КІЛЬКІСТЬ
Хліб чорний  1
Якщо номер товару і його кількість (менше 100 шт.) були вказані коректно, то товар додається в кошик.
Якщо вказано кількість «0», то товар видаляється з кошика:

Виберіть товар: 2
Вибрано: Хліб чорний
Введіть кількість, штук: 0
ВИДАЛЯЮ З КОШИКА
КОШИК ПОРОЖНІЙ
Далі знову відображається перелік товарів і пропонується купити наступний товар.
Якщо номер товару вказано неправильно, виводиться сповіщення про помилку, нову виводиться перелік товарів:

№  НАЗВА                 ЦІНА
1  Молоко пастеризоване  12
2  Хліб чорний           9
3  Сир білий             21
4  Сметана 20%           25
5  Кефір 1%              19
6  Вода газована         18
7  Печиво "Весна"        14
   -----------
0  ПОВЕРНУТИСЯ
Виберіть товар: 8
ПОМИЛКА! ВКАЗАНО НЕПРАВИЛЬНИЙ НОМЕР ТОВАРУ
Щоб завершити купувати товари і перейти до попереднього меню, необхідно ввести з клавіатури цифру «0».
Щоб отримати підсумковий рахунок, потрібно ввести число «2».
Рахунок має містити таку інформацію: №, назва, ціна товару, кількість товару, вартість товару. 
У кінці чека має бути: РАЗОМ ДО CПЛАТИ: сума_за_всі_товари
Щоб встановити свій профіль потрібно, ввести число «3», після чого програма попросить ввести ваше ім'я та ваш вік:
Ваше імʼя: _
Ваш вік: _
Імʼя користувача не може бути порожнім і повинно містити хоча б одну літеру.
Користувач не може бути молодшим 7-ми або старшим 150-ти років
Щоб завершити роботу та вийти з програми, потрібно ввести число «0».
У програмі потрібно перевіряти інформацію, яку вводить користувач, а саме:
• обраний пункт меню існує;
• обраний товар існує;
• введена кількість товару більша нуля;
• імʼя користувача містить хча б одну літеру;
• вік користувача становить від 7-ми до 150-ти років.

3 ОПИС ВИКОНАНОЇ РОБОТИ
Функція print_header() відповідає за виведення на екран декоративного заголовку магазину. Вона формує фрейм 
зі спеціальними символами і розміщує назву «ПРОДОВОЛЬЧИЙ МАГАЗИН "ВЕСНА"» по центру.
Функція ptint_menu_options() виводить головне меню з доступними пунктами: вибір товарів, перегляд рахунку, налаштування профілю та вихід із програми. Вона також запрошує користувача ввести номер команди, яку він хоче виконати.
Функція visual_length($str) використовується для підрахунку візуальної довжини рядків з урахуванням багатобайтових символів. 
Це дозволяє вирівнювати колонки таблиць за шириною при виведенні товарів та чеку.
Функція select_product() реалізує логіку вибору товарів. Вона відображає список доступних продуктів з номерами, назвами та цінами. Після введення номера товару користувач вказує кількість. 
Якщо кількість > 0 — товар додається до кошика; якщо 0 — товар видаляється з кошика. У випадку введення невірного номера чи недопустимої кількості виводиться відповідне повідомлення про помилку, і користувач може повторити введення.
Функція print_receipt() формує підсумковий чек. 
Вона перевіряє, чи є товари в кошику, і, якщо так, виводить таблицю з переліком придбаних продуктів: порядковий номер, назва, ціна за одиницю, кількість 
і загальна вартість кожного товару. Наприкінці виводиться загальна сума до сплати. Якщо кошик порожній — повідомляється відповідне повідомлення.
Функція setup_profile() забезпечує налаштування профілю користувача. Вона запитує ім’я та вік. Після введення перевіряється, 
чи ім’я містить хоча б одну літеру, а вік знаходиться в межах від 7 до 150 років. 
Основна логіка програми реалізована в головному циклі, який постійно виводить меню, зчитує введену команду та викликає відповідну функцію (select_product, print_receipt, setup_profile). 
Якщо введена команда неправильна — програма повідомляє про помилку і пропонує повторити введення. Команда 0 завершує роботу застосунку.

4 ВИСНОВКИ
У програмі використано масиви для зберігання товарів, кошика та профілю. 
Застосовано умовні конструкції (if, switch) і цикли (while) для керування логікою. 
Для перевірки введених даних використано регулярні вирази. Код організовано у вигляді функцій для зручності та повторного використання. 
Реалізовано форматований вивід таблиць, обробку помилок вводу і взаємодію з користувачем у консолі.

ДОДАТОК В
Програмний код
B.1 constants.php
GitHub репозиторій: https://github.{…}/{ файл_з_програмним_кодом }
1 <?php
2 $products = [
3     1 => ['name' => 'Молоко пастеризоване', 'price' => 12],
4     2 => ['name' => 'Хліб чорний', 'price' => 9],
5     3 => ['name' => 'Сир білий', 'price' => 21],
6     4 => ['name' => 'Сметана 20%', 'price' => 25],
7     5 => ['name' => 'Кефір 1%', 'price' => 19],
8     6 => ['name' => 'Вода газована', 'price' => 18],
9     7 => ['name' => 'Печиво "Весна"', 'price' => 14],
10];
11
12function print_header() {
13    echo "################################\n";
14    echo "# ПРОДОВОЛЬЧИЙ МАГАЗИН \"ВЕСНА\" #\n";
15    echo "################################\n";
16}
17
18function ptint_menu_options() {
19    echo "1 Вибрати товари\n";
20    echo "2 Отримати підсумковий рахунок\n";
21    echo "3 Налаштувати свій профіль\n";
22    echo "0 Вийти з програми\n";
23    echo "Введіть команду: ";
24}
25?>

B.2 pzpi-23-4-borshch-anatolii-task3.php
GitHub репозиторій: https://github.{…}/{ файл_з_програмним_кодом }
1  <?php
2  require_once 'constants.php';
3  $cart = [];
4  
5  function visual_length($str) {
6      preg_match_all('/./u', $str, $matches);
7      return count($matches[0]);
8  }
9  
10 function select_product() {
11     global $products, $cart;
12 
13     while (true) {
14         echo "№  НАЗВА                 ЦІНА\n";
15 
16         foreach ($products as $id => $product) {
17             $name = $product['name'];
18             $price = $product['price'];
19             $length = visual_length($name);
20             $padding = 22 - $length;
21             if ($padding < 0) $padding = 0;
22         
23             echo $id . '  ' . $name . str_repeat(' ', $padding) . $price . "\n";
24         }
25 
26         echo "   -----------\n";
27         echo "0  ПОВЕРНУТИСЯ\n";
28         echo "Виберіть товар: ";
29 
30         $productChoice = (int)trim(fgets(STDIN));
31         if ($productChoice === 0) break;
32 
33         if (!isset($products[$productChoice])) {
34             echo "ПОМИЛКА! ВКАЗАНО НЕПРАВИЛЬНИЙ НОМЕР ТОВАРУ\n";
35             continue;
36         }
37 
38         echo "Вибрано: " . $products[$productChoice]['name'] . "\n";
39         echo "Введіть кількість, штук: ";
40         $qty = (int)trim(fgets(STDIN));
41 
42         if ($qty === 0) {
43             unset($cart[$productChoice]);
44             echo "ВИДАЛЕНО З КОШИКА\n";
45         } elseif ($qty > 0 && $qty <= 99) {
46             $cart[$productChoice] = $qty;
47             echo "У КОШИКУ:\n";
48             echo "НАЗВА                 КІЛЬКІСТЬ\n";
49             foreach ($cart as $id => $count) {
50                 $name = $products[$id]['name'];
51                 $length = visual_length($name);
52                 $padding = 22 - $length;
53                 if ($padding < 0) $padding = 0;
54 
55                 echo $name . str_repeat(' ', $padding) . "$count\n";
56             }
57             echo "\n";
58         } else {
59             echo "ПОМИЛКА! НЕКОРЕКТНА КІЛЬКІСТЬ\n";
60         }
61     }
62 
63     ;
64 }
65 
66 function print_receipt() {
67     global $cart, $products;
68     
69     if (empty($cart)) {
70         echo "КОШИК ПОРОЖНІЙ\n";
71         return;
72     }
73 
74     echo "№  НАЗВА                 ЦІНА  КІЛЬКІСТЬ  ВАРТІСТЬ\n";
75     $total = 0;
76     $num = 0;
77     foreach ($cart as $id => $qty) {
78         $name = $products[$id]['name'];
79         $price = $products[$id]['price'];
80         $cost = $price * $qty;
81         $total += $cost;
82 
83         $length = visual_length($name);
84         $padding = 22 - $length;
85         if ($padding < 0) $padding = 0;
86 
87         echo sprintf("%-3d%s%s%-5d %-10d %-9d\n",
88             $num,
89             $name,
90             str_repeat(' ', $padding),
91             $price,
92             $qty,
93             $cost
94         );
95         $num++;
96     }
97     echo "РАЗОМ ДО CПЛАТИ: $total\n";
98 }
99 
100function setup_profile() {
101    global $user;
102
103    while (true) {
104        echo "Ваше імʼя: ";
105        $input = trim(fgets(STDIN));
106
107        if (!preg_match("/^[А-Яа-яЁёЇїІіЄєҐґA-Za-z\s\-\x27]+$/u", $input)) {
108            echo "ПОМИЛКА! Імʼя може містити лише літери, апостроф ‘ʼ’, дефіс ‘-’, пробіл\n\n";
109            continue;
110        }
111
112        break;
113    }
114
115    while (true) {
116        echo "Ваш вік: ";
117        $input_age = fgets(STDIN);
118        $age = (int)preg_replace('/\D+/', '', trim($input_age));
119
120        if ($age < 7 || $age > 150) {
121            echo "ПОМИЛКА! Користувач повинен мати від 7 до 150.\n";
122            echo "\n";
123        } else {
124            break;
125        }
126    }
127
128    echo "\n";
129}
130
131print_header();
132
133while (true) {
134    ptint_menu_options();
135    $choice = trim(fgets(STDIN));
136
137    switch ($choice) {
138        case "1":
139            select_product();
140            break;
141
142        case "2":
143            print_receipt();
144            break;
145
146        case "3":
147            setup_profile();
148            break;
149
150        case "0":
151            exit(0);
152
153        default:
154            echo "ПОМИЛКА! Введіть правильну команду\n";
155            break;
156    }
157}
158